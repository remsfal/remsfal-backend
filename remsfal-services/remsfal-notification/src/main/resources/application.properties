%dev.quarkus.devservices.enabled=false
# Server port
quarkus.http.port=8082
# Server host
quarkus.http.host=0.0.0.0

# openapi config
quarkus.smallrye-openapi.store-schema-directory=target/openapi
quarkus.smallrye-openapi.store-schema-file-name=notification-spec

%dev.quarkus.http.proxy.enable-forwarded-host=true
%test.quarkus.http.proxy.enable-forwarded-host=true

# Kafka configuration
%dev.quarkus.kafka.devservices.enabled=false
%test.quarkus.kafka.devservices.enabled=true

# Azure Event Hubs (Kafka-compatible)
# Dev: loaded from Key Vault via ConfigSource
# Prod: loaded from Container App environment variable
%dev.mp.messaging.connector.smallrye-kafka.bootstrap.servers=${eventhub-bootstrap-server}
%dev.mp.messaging.connector.smallrye-kafka.security.protocol=SASL_SSL
%dev.mp.messaging.connector.smallrye-kafka.sasl.mechanism=PLAIN
%dev.mp.messaging.connector.smallrye-kafka.sasl.jaas.config=${eventhub-connection-string}

%prod.mp.messaging.connector.smallrye-kafka.bootstrap.servers=${EVENTHUB_BOOTSTRAP_SERVER}
%prod.mp.messaging.connector.smallrye-kafka.security.protocol=SASL_SSL
%prod.mp.messaging.connector.smallrye-kafka.sasl.mechanism=PLAIN
%prod.mp.messaging.connector.smallrye-kafka.sasl.jaas.config=${EVENTHUB_CONNECTION_STRING}

# Tests use Kafka DevServices - no manual config needed, KafkaCompanionResource auto-configures

mp.messaging.incoming.user-notification.connector=smallrye-kafka
mp.messaging.incoming.user-notification.topic=user-notification
mp.messaging.incoming.user-notification.group.id=notification-service
mp.messaging.incoming.user-notification.commit-strategy=throttled
mp.messaging.incoming.user-notification.auto.offset.reset=earliest
mp.messaging.incoming.user-notification.value.deserializer=de.remsfal.notification.boundary.EmailEventJsonDeserializer

# Mailer config (mock/dummy for now - no real emails)
quarkus.mailer.from=noreply@remsfal.de
quarkus.mailer.mock=true
